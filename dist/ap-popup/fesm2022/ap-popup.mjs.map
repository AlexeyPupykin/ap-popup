{"version":3,"file":"ap-popup.mjs","sources":["../../../projects/ap-popup/src/lib/ap-popup.component.ts","../../../projects/ap-popup/src/lib/ap-popup.component.html","../../../projects/ap-popup/src/ap-popup.ts"],"sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding,\r\n  Input,\r\n  Output,\r\n  TemplateRef,\r\n} from '@angular/core';\r\nimport { Subject, timer, takeUntil } from 'rxjs';\r\nimport { PopupAnimationType, PopupThemeType } from './utils/types';\r\nimport { NgClass, NgIf, NgTemplateOutlet } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'lib-ap-popup',\r\n  imports: [NgIf, NgClass, NgTemplateOutlet],\r\n  templateUrl: './ap-popup.component.html',\r\n  styleUrls: ['./ap-popup.component.scss'],\r\n})\r\nexport class ApPopupComponent {\r\n  @Input() public text?: string;\r\n  @Input() public svgIcon?: string;\r\n\r\n  @Input() public template?: TemplateRef<any>;\r\n  @Input() public templateContext: object = {};\r\n\r\n  @Input() public theme: PopupThemeType = 'default';\r\n  @Input() public animation: PopupAnimationType = 'cubic';\r\n  @Input() public animationDuration = 900;\r\n  @Input() public animationHideDuration = 900;\r\n  @Input() public timeout: number | null = 3000;\r\n  @Input() public parentSelector: string | null = null;\r\n  @Input() public closeByMouseUp = true;\r\n\r\n  @Input() public customClass?: string;\r\n  @Input() public customWrapperClass?: string;\r\n  @Input() public zIndex?: number;\r\n\r\n  @Output() public remove = new EventEmitter<void>();\r\n\r\n  public hideAnimation?: string;\r\n  public distanceToPageTop = 0;\r\n  public id?: number;\r\n\r\n  protected readonly cubicBezierFunctionIn = 'cubic-bezier(0, 1.82, 0.46, 0.84)';\r\n  protected readonly cubicBezierFunctionOut = 'cubic-bezier(0.42, -0.65, 0.27, 0.93)';\r\n\r\n  private readonly _close$ = new Subject<void>();\r\n\r\n  @HostBinding('style.transition') public get getHostTransition(): string {\r\n    let timingFunction = 'linear';\r\n\r\n    if (this.animation === 'cubic') {\r\n      timingFunction = this.cubicBezierFunctionIn;\r\n    }\r\n\r\n    return `all ${timingFunction} ${this.animationDuration}ms`;\r\n  }\r\n\r\n  @HostBinding('style.zIndex') public get getZIndex(): string {\r\n    return this.zIndex?.toString() || '1';\r\n  }\r\n\r\n  @HostBinding('style.cursor') public get getCursor(): string {\r\n    return this.closeByMouseUp ? 'pointer' : 'default';\r\n  }\r\n\r\n  public constructor(public readonly elementRef: ElementRef) {}\r\n\r\n  public ngOnInit(): void {\r\n    if (!this.timeout) return;\r\n\r\n    timer(this.timeout)\r\n      .pipe(takeUntil(this._close$))\r\n      .subscribe(() => {\r\n        this._startHideAnimation();\r\n      });\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this._close$.complete();\r\n  }\r\n\r\n  public onMouseUp(): void {\r\n    if (!this.closeByMouseUp) return;\r\n\r\n    this.close();\r\n  }\r\n\r\n  public close(): void {\r\n    this.zIndex = 999;\r\n    this._close$.next();\r\n    this._startHideAnimation();\r\n  }\r\n\r\n  public updateDistanceTop(): void {\r\n    this.distanceToPageTop = this._getDistanceFromBottomToPageTop(this.elementRef.nativeElement);\r\n  }\r\n\r\n  private _startHideAnimation(): void {\r\n    this.updateDistanceTop();\r\n    this.hideAnimation = `${this.animation}-out`;\r\n    this.remove.emit();\r\n  }\r\n\r\n  private _getDistanceFromBottomToPageTop(element: HTMLElement): number {\r\n    return element.getBoundingClientRect().bottom;\r\n  }\r\n}\r\n","<div\r\n  class=\"ap-popup\"\r\n  [ngClass]=\"[animation, hideAnimation ? hideAnimation : '', customClass ? customClass : '']\"\r\n  [style]=\"\r\n    '--animationDuration:' +\r\n    animationDuration +\r\n    'ms;' +\r\n    '--cubicFunctionIn:' +\r\n    cubicBezierFunctionIn +\r\n    ';' +\r\n    '--cubicFunctionOut:' +\r\n    cubicBezierFunctionOut +\r\n    ';' +\r\n    '--distanceToPageTop:' +\r\n    distanceToPageTop +\r\n    'px;'\r\n  \"\r\n  (mouseup)=\"onMouseUp()\"\r\n>\r\n  <div *ngIf=\"text || template\" class=\"ap-popup__content\" [ngClass]=\"'ap-popup__content-' + theme\">\r\n    <ng-container\r\n      *ngIf=\"template\"\r\n      [ngTemplateOutlet]=\"template\"\r\n      [ngTemplateOutletContext]=\"templateContext\"\r\n    ></ng-container>\r\n\r\n    <span *ngIf=\"text && !template\" [innerHtml]=\"text\"></span>\r\n  </div>\r\n</div>\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}